---
global:
  resolve_timeout: 5m
  slack_api_url: "{{ .SLACK_WEBHOOK }}"
route:
  group_by: ["alertname", "job"]
  group_interval: 10m
  group_wait: 1m
  receiver: slack
  repeat_interval: 12h
  routes:
    - receiver: "null"
      matchers:
        - alertname =~ "InfoInhibitor"
    - receiver: slack
      continue: true
      matchers:
        - severity = "critical"
inhibit_rules:
  - equal: ["alertname", "namespace"]
    source_matchers:
      - severity = "critical"
    target_matchers:
      - severity = "warning"
receivers:
  - name: "slack"
    slack_configs:
      - channel: "#prometheus-alerts"
        icon_url: https://avatars3.githubusercontent.com/u/3380462
        username: "Prometheus"
        send_resolved: true
        title: |-
          [{{`{{ .Status }}`}}{{`{{ if eq .Status "firing" }}`}}:{{`{{ .Alerts.Firing | len }}`}}{{`{{ end }}`}}] {{`{{ if ne .CommonAnnotations.summary ""}}`}}{{`{{ .CommonAnnotations.summary }}`}}{{`{{ else }}`}}{{`{{ .CommonLabels.alertname }}`}}{{`{{ end }}`}}
        text: >-
          {{`{{ range .Alerts -}}`}} 
            **Alert:** {{`{{ .Annotations.title }}`}}{{`{{ if .Labels.severity }}`}} - `{{`{{ .Labels.severity }}`}}`{{`{{ end }}`}}
          **Description:** {{`{{ if ne .Annotations.description ""}}`}}{{`{{ .Annotations.description }}`}}{{`{{else}}`}}N/A{{`{{ end }}`}}
          **Details:**
            {{`{{ range .Labels.SortedPairs }}`}} â€¢ *{{`{{ .Name }}`}}:* `{{`{{ .Value }}`}}`
            {{`{{ end }}`}}
          {{`{{ end }}`}}
